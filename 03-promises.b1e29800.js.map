{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAUC,SAASC,cAAe,kBAClCC,EAASF,SAASC,cAAe,iBACjCE,EAAWH,SAASC,cAAe,mBAC1BD,SAASC,cAAe,SAEhCG,iBAAkB,UAKzB,SAAkBC,GAChBA,EAAMC,iBACN,IAAMC,EAAQC,SAAST,EAAQU,MAAO,IAChCC,EAAOF,SAASN,EAAOO,MAAO,IAC9BE,EAASH,SAASL,EAASM,MAAO,KAK1C,SAAqBF,EAAOG,EAAMC,GACdC,WAAWC,EAAcN,EAAOI,EAAQJ,EAAOG,GAJjEI,CAAYP,EAAOG,EAAMC,MAT3B,IAAII,EAAW,EACXC,EAAa,KAejB,SAASH,EAAaF,EAAQJ,EAAOG,GACnCO,EAAYN,EAAQJ,EAAOG,GAC3BM,EAAaE,YAAYD,EAAaP,EAAMC,EAAQJ,EAAOG,GAG7D,SAASO,EAAYN,EAAQJ,EAAOG,GAClC,IAAMS,EAAOZ,EAAQG,EAAOK,EAE5B,IADEA,GAAY,GACCJ,EAGb,OAFAS,cAAcJ,QACdD,EAAW,IAOf,SAAuBM,EAAUd,GAC/B,IAAMe,EAAgBC,KAAKC,SAAW,GAClCF,EACFzB,EAAA4B,OAAOC,QAAQ,sBAAqCC,OAAfN,EAAS,QAAYM,OAANpB,EAAM,OAE1DV,EAAA4B,OAAOG,QAAQ,oBAAmCD,OAAfN,EAAS,QAAYM,OAANpB,EAAM,OAGnD,IAAIsB,SAAQ,SAACC,EAASC,GACvBT,GACFQ,EAAQ,CAAEE,SAAAX,EAAUd,UAEtBwB,EAAO,CAAEC,SAAAX,EAAUd,aAClB0B,MAAK,SAAAC,G,IAAGC,EAAQD,EAARF,SAAUI,EAAKF,EAAL3B,MACnB8B,QAAQC,IAAI,uBAAwCX,OAAfQ,EAAS,QAAYR,OAANS,EAAM,UAE3DG,OAAM,SAAAL,G,IAAGC,EAAQD,EAARF,SAAUI,EAAKF,EAAL3B,MAClB8B,QAAQC,IAAI,sBAAqCX,OAAfQ,EAAS,QAAYR,OAANS,EAAM,UApBzDI,CAAczB,EAAUI,I","sources":["src/js/03-promises.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nconst delayEl = document.querySelector(`[name=\"delay\"]`);\nconst stepEl = document.querySelector(`[name=\"step\"]`);\nconst amountEl = document.querySelector(`[name=\"amount\"]`);\nconst formEl = document.querySelector(`.form`);\n\nformEl.addEventListener(`submit`, onSubmit)\n\nlet position = 0;\nlet intervalId = null;\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  const delay = parseInt(delayEl.value, 10);\n  const step = parseInt(stepEl.value, 10);\n  const amount = parseInt(amountEl.value, 10);\n\n  makeTimeout(delay, step, amount)\n}\n\nfunction makeTimeout(delay, step, amount) {\n  const timeoutId = setTimeout(makeInterval, delay, amount, delay, step)\n}\n\nfunction makeInterval(amount, delay, step) {\n  callPromise(amount, delay, step)\n  intervalId = setInterval(callPromise, step, amount, delay, step)\n}\n\nfunction callPromise(amount, delay, step) {\n  const time = delay + step * position;\n    position += 1;\n  if (position > amount) {\n    clearInterval(intervalId)\n    position = 0;\n    return;\n  }\n  \n  createPromise(position, time)\n} \n  \nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    Notify.success(`Fullfilled promise ${position} in ${delay}ms`);\n  } else {\n    Notify.failure(`Rejected promise ${position} in ${delay}ms`);\n  }\n\n  return new Promise((resolve, reject) => {\n    if (shouldResolve) {\n      resolve({ position, delay })\n    }\n    reject({ position, delay })\n  }).then(({ position, delay }) => {\n    console.log(`✅ Fulfilled promise ${position} in ${delay}ms`);\n  })\n  .catch(({ position, delay }) => {\n    console.log(`❌ Rejected promise ${position} in ${delay}ms`);\n  });\n}\n\n\n  \n"],"names":["$h6c0i","parcelRequire","$ce04d3a99e08e73b$var$delayEl","document","querySelector","$ce04d3a99e08e73b$var$stepEl","$ce04d3a99e08e73b$var$amountEl","addEventListener","event","preventDefault","delay","parseInt","value","step","amount","setTimeout","$ce04d3a99e08e73b$var$makeInterval","$ce04d3a99e08e73b$var$makeTimeout","$ce04d3a99e08e73b$var$position","$ce04d3a99e08e73b$var$intervalId","$ce04d3a99e08e73b$var$callPromise","setInterval","time","clearInterval","position1","shouldResolve","Math","random","Notify","success","concat","failure","Promise","resolve","reject","position","then","param","_$position","_$delay","console","log","catch","$ce04d3a99e08e73b$var$createPromise"],"version":3,"file":"03-promises.b1e29800.js.map"}